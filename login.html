<!DOCTYPE html>
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <title>Login Form</title>
      <link rel="stylesheet" href="style.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
   </head>
   <style>
      .custom-link {
          display: inline-block;
          padding: 10px 20px;
          color: #fff;
          background-color: #7e57c2; /* Purple background color */
          border-radius: 5px;
          text-decoration: none;
          transition: background-color 0.3s ease;
      }
  
      .custom-link:hover {
          background-color: #3f51b5; /* Darker purple on hover */
      }
  </style>
   <body>
      <div class="container">
         <header>Login Form</header>
         <form id="loginForm">
            <div class="input-field">
               <input type="email" id="email" name="email" required />
               <label>Email or Username</label>
            </div>
            <div class="input-field">
               <input class="pswrd" type="password" id="password" name="password" required />
               <span class="show">SHOW</span>
               <label>Password</label>
            </div>
            <div class="pass">
               <a href="f.html">Forgot Password?</a>
            </div>
            <div class="button">
               <div class="inner"></div>
               <a href="index.html">
               <button type="button" onclick="submitLoginForm()">LOGIN</button>
               </a>
               <div id="error-msg" class="error"></div>
            </div>
         </form>
         <div class="auth">
            Or login with
         </div>
         <div class="links">
            <div class="facebook">
               <i class="fab fa-facebook-square"><span>Facebook</span></i>
            </div>
            <div class="google">
               <i class="fab fa-google-plus-square"><span>Google</span></i>
            </div>
         </div>
         <div class="signup">
            Not a member? <a href="C:\Users\HP\OneDrive - Amal Jyothi College of Engineering\Desktop\solar ecommerce proj\login_registration_pages\reg.html">Signup now</a>
         </div>
         <div>
            <a href="admlog.html" class="custom-link">Go to Admin Login Page</a>
         </div>
      </div>
      <script>
         async function submitLoginForm() {
            try {
               const email = document.getElementById("email").value;
               const password = document.getElementById("password").value;

               const response = await fetch("http://localhost:4000/login", {
                  method: "POST",
                  headers: {
                     "Content-Type": "application/json",
                  },
                  body: JSON.stringify({ email, password }),
               });

               if (!response.ok) {
                  const errorData = await response.json();
                  throw new Error(errorData.msg || "Invalid credentials. Please try again.");
               }

               // Login successful, redirect to home page
               window.location.href = "C:\Users\HP\OneDrive - Amal Jyothi College of Engineering\Desktop\solar ecommerce proj\project mini\index.html";
            } catch (error) {
               console.error("Error:", error);
               document.getElementById("error-msg").textContent = error.message;
            }
         }

         var input = document.querySelector('.pswrd');
         var show = document.querySelector('.show');
         show.addEventListener('click', active);
         function active(){
            if(input.type === "password"){
               input.type = "text";
               show.style.color = "#1DA1F2";
               show.textContent = "HIDE";
            }else{
               input.type = "password";
               show.textContent = "SHOW";
               show.style.color = "#111";
            }
         }
      </script>
   </body>
</html>
